package models

import (
	"gorm.io/gorm"

	"github.com/google/uuid"
	"time"
)

// {{.EntityName}} represents the {{.EntityName}} entity
type {{.EntityName}} struct {
  gorm.Model
  {{$entityName := .EntityName}}
	{{- range .Fields}}
	{{toGoFieldName .FieldName}} *{{convertTypeScriptTypeToGo .FieldType}} `{{formatGormTags . $.TableName}} {{formatValidationTags .}}`
	{{- end}}
	{{- range .Relations}}
	{{formatRelation $entityName .}}
	{{- end}}
}

// TableName sets the table name for the {{.EntityName}} model
func ({{.EntityNameLower}} *{{.EntityName}}) TableName() string {
	return "{{.GetTableName}}"
}

func ({{.EntityNameLower}} *{{.EntityName}}) BeforeCreate(_ *gorm.DB) (err error) {
	id := uuid.New().String()
  {{.EntityNameLower}}.{{toGoFieldName .GetPrimaryKeyName}} = &id
  return
}
